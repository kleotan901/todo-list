{% extends "base.html" %}

{% block content %}
  <div class="row">
    <div class="col-sm-8">
      <h2>TODO list</h2>
    </div>
    <div class="col-sm-4">
      <a href="{% url 'task_list:task-create' %}" class="btn btn-primary">Add task</a>
    </div>
  </div>


<div class="row">
{% for task in task_list %}

  <div class="col-sm-8">
    <ul>
      <li>
        <strong>{{ task.content }}</strong>
        {% if task.is_completed %}
          <span class="task-status-done">Done</span>
        {% else %}
          <span class="task-status-notdone">Not done</span>
        {% endif %}
      </li>
      <li>
        <em>Created: {{ task.datetime }}</em>
        {% if task.deadline %}
          <em>Deadline: {{ task.deadline }}</em>
        {% endif %}
      </li>
      <li>
        Tags: {% for tag in task.tags.all %} {{ tag.name }} {% endfor %}
        <a href="{% url 'task_list:task-update' pk=task.id %}">Update</a>
        <a href="{% url 'task_list:task-delete' pk=task.id %}"">Delete</a>
      </li>
    </ul>
  </div>

  <div class="col-sm-4">
    {% if task.is_completed == False %}
      <form action="{% url 'task_list:task-change-status' pk=task.pk %}" method="post">
        {% csrf_token %}
          <button type="submit" class="btn btn-success">Complete</button>
      </form>
    {% else %}
        <form action="{% url 'task_list:task-change-status' pk=task.pk %}" method="post">
          {% csrf_token %}
           <button type="submit" class="btn btn-info">Undo</button>
        </form>
    {% endif %}

  </div>

{% endfor %}
</div>
{% endblock %}
